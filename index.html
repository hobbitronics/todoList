<!DOCTYPE html>
<head>
    <title>Javascript Todo List</title>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-blue.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
</head>
<html>
    <body>
        <div class="demo-card-wide mdl-card mdl-shadow--2dp centered">
            <div class="mdl-card__title">
              <h2 class="mdl-card__title-text">Todo List</h2>
            </div>
            <div class="mdl-card__supporting-text">
                todo: <input id="text" type="text" placeholder="enter todo">
                <button id="add" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent btn">add</button>
                <ul id="container" class="demo-list-control mdl-list">
                </ul>
                <button id="del" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent btn">delete todos</button>

                <ul class="demo-list-control mdl-list">
                    <li class="mdl-list__item">
                      <span class="mdl-list__item-primary-content">
                        Bryan Cranston
                      </span>
                      <span class="mdl-list__item-secondary-action">
                        <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" >
                          <input type="checkbox"  class="mdl-checkbox__input" />
                        </label>
                      </span>
                    </li>
                   
                    <li class="mdl-list__item">
                      <span class="mdl-list__item-primary-content">
                        Ryan Cranston
                      </span>
                      <span class="mdl-list__item-secondary-action">
                        <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" >
                          <input type="checkbox"  class="mdl-checkbox__input" />
                        </label>
                      </span>
                    </li>
                    
                  </ul>
            </div>
            <div class="mdl-card__actions mdl-card--border">
              <a class="mdl-button mdl-button--colored mdl-js-button mdl-js-ripple-effect">
                Back to my projects
              </a>
            </div>
            <div class="mdl-card__menu">
              <button class="mdl-button mdl-button--icon mdl-js-button mdl-js-ripple-effect">
                <i class="material-icons">share</i>
              </button>
            </div>
          </div>
    </body>
</html>
    
<script>
    document.addEventListener('DOMContentLoaded', () => {
        let i = 0
        const add = document.getElementById("add")
        add.addEventListener("click", () => {
            i++
            const text = document.getElementById("text")
            const container = document.getElementById("container")
            const newTodo = document.createElement("li")
            const todoContent = document.createElement('span')
            const doneWrapWrap = document.createElement('div')
            const doneWrap = document.createElement('label')
            const done = document.createElement('input')
            newTodo.className = "mdl-list__item"
            todoContent.className = "mdl-list__item-primary-content"
            doneWrapWrap.className = "mdl-list__item-secondary-action"
            doneWrap.className = "mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect"
            doneWrap.for = `list-checkbox-${i}`
            done.type = 'checkbox'
            done.id = `list-checkbox-${i}`
            done.className = "mdl-checkbox__input"
            todoContent.innerText = text.value
            componentHandler.upgradeElement(doneWrap)
            componentHandler.upgradeElement(newTodo)
            componentHandler.upgradeElement(todoContent)
            componentHandler.upgradeElement(doneWrapWrap)
            componentHandler.upgradeElement(done)
            doneWrap.appendChild(done)
            doneWrapWrap.appendChild(doneWrap)
            newTodo.appendChild(todoContent)
            newTodo.appendChild(doneWrapWrap)
            container.appendChild(newTodo)
            text.value = ""
            let toggle = true;
            done.addEventListener("click", () => {
                if (toggle) {
                    newTodo.querySelector("span").style = "text-decoration: line-through";
                    newTodo.id = "checked";
                    toggle = !toggle;
                } else {
                    newTodo.querySelector("span").style = "";
                    newTodo.id = "";
                    toggle = !toggle;
                }
            })
            const del = document.getElementById("del");
            del.addEventListener("click", () => {
                const checked = document.getElementById("checked");
                try {
                    container.removeChild(checked);
                } catch (error) {
                    console.log("There were items not selected: " + error)
                }
            })
        })
    })
</script>

<style>
    body .btn {
        margin: 4px 8px;
    }

    .demo-card-wide.mdl-card {
        width: 80%;
    }
    .demo-card-wide > .mdl-card__title {
    color: #fff;
    height: 176px;
    background: url('https://getmdl.io/assets/demos/welcome_card.jpg') center / cover;
    }
    .demo-card-wide > .mdl-card__menu {
    color: #fff;
    }

    body {
    padding: 20px;
    background: #fafafa;
    position: relative;
    }

    .centered {
        margin: auto;
    }

    .demo-list-control {
        width: 300px;
    }
</style>